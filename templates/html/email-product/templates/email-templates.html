{% extends './html/base.html' %}
{% load static %}

{% block content %}
<div class="tw-flex tw-flex-col tw-min-h-[100vh] tw-p-3 tw-place-items-center tw-gap-4">

    <div class="modal model-dialog fade modal-dialog-centered !tw-hidden" id="delete-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Delete Template</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modal-body">
              Are you sure you want to delete this? This action cannot be undone
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <form action="" id="modal-btn-delete" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            </div>
          </div>
        </div>
    </div>

    <div class="tw-text-3xl tw-font-semibold tw-text-center tw-mt-[2%]">
       My Templates
    </div>

    <div class="tw-flex tw-mt-[5%] tw-w-full tw-gap-4 tw-mx-[30%]">

        <a class="tw-flex tw-flex-col tw-border-solid 
                    tw-text-center tw-justify-items-center 
                    tw-place-content-center 
                    tw-w-[250px] tw-g-[150px] 
                    tw-rounded-lg tw-shadow-xl tw-p-5"
                    href="{% url "email-template-create" %}"
                    >
            <i class="bi bi-plus-lg tw-text-3xl"></i>
            <p>Create template</p>
        </a>  

        {% for template in private_templates %}
            <div class="tw-flex tw-flex-col tw-border-solid 
                        tw-text-center tw-justify-items-center 
                        tw-place-content-center 
                        tw-w-[250px] tw-h-[150px] 
                        tw-rounded-lg tw-shadow-xl tw-p-5"
                        >
                <p>{{template.name}} #{{template.id}}</p>
                <div class="tw-flex tw-gap-1">
                    <button type="submit" onclick="onDeleteTemplate('{% url 'email-template-delete' id=template.id %}', '{{ template.name }} #{{ template.id }}')" 
                            class="btn btn-danger tw-w-full" data-bs-toggle="modal" data-bs-target="#delete-modal"><i class="bi bi-trash"></i></button>
                    <a class="btn btn-primary tw-w-full" href="{% url 'email-template-create' %}?edit={{ template.id }}">
                        <i class="bi bi-pencil-fill"></i>
                    </a>
                </div>                
            </div>
        {% endfor %}
    </div>  
    <hr>
    <div class="tw-text-2xl">
        Public templates
    </div>
    <div class="tw-flex tw-mt-[5%] tw-w-full tw-flex-wrap tw-gap-4 tw-mx-[30%]">
        {% for template in public_templates %}
            <div class="tw-flex tw-flex-col tw-border-solid 
                        tw-text-center tw-justify-items-center 
                        tw-place-content-center 
                        tw-w-[250px] tw-g-[150px] 
                        tw-rounded-lg tw-shadow-xl tw-p-5"
                        >
                <p>{{template.name}}</p>
                <div class="tw-flex tw-gap-1">
                    <a class="btn btn-primary tw-w-full" href="{% url 'email-template-create' %}?edit={{ template.id }}">
                        <i class="bi bi-pencil-fill"></i>
                    </a>
                </div>
            </div>
        {% endfor %}

    </div>  
</div>
<script src="{% static "./js/email-product/email-templates.js" %}"></script>
{% endblock content %}